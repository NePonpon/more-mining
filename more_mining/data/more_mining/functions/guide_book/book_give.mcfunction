tag @e[limit=1,type=item,nbt={Item:{id:"minecraft:diamond"}}] add book
execute as @e[type=item,tag=book,nbt={Item:{id:"minecraft:diamond"}}] at @s if block ~ ~-0.5 ~ minecraft:smithing_table run summon item ~ ~-0.5 ~ {Item:{id:"minecraft:written_book",Count:1b,tag:{CustomModelData:2,pages:['["",{"text":"\\u30dd\\u30a4\\u30f3\\u30c8\\u306e\\u90e8\\u5206\\u3092\\u62bc\\u3059\\u3068\\n\\u4ea4\\u63db\\u304c\\u3067\\u304d\\u307e\\u3059\\u3002","bold":true,"color":"dark_red"},{"text":"\\n","color":"reset"},{"text":"\\u30c0\\u30a4\\u30e4\\u30e2\\u30f3\\u30c9","bold":true,"color":"aqua"},{"text":" ","color":"reset"},{"text":"500pt","underlined":true,"color":"dark_green","clickEvent":{"action":"run_command","value":"/trigger trade_trigger set 1"},"hoverEvent":{"action":"show_text","contents":"\\u4ea4\\u63db"}},{"text":"\\n","color":"reset"},{"text":"\\u30cd\\u30b6\\u30e9\\u30a4\\u30c8 ","bold":true,"color":"black"},{"text":"2000pt","color":"dark_green","underlined":true,"clickEvent":{"action":"run_command","value":"/trigger trade_trigger set 2"},"hoverEvent":{"action":"show_text","contents":"\\u4ea4\\u63db"}},{"text":"\\n","color":"reset"},{"text":"\\u7d4c\\u9a13\\u5024\\u74f6","bold":true,"color":"gold"},{"text":"×64","color":"gold"},{"text":" ","bold":true,"color":"gold"},{"text":"1000pt","color":"dark_green","underlined":true,"clickEvent":{"action":"run_command","value":"/trigger trade_trigger set 3"},"hoverEvent":{"action":"show_text","contents":"\\u4ea4\\u63db"}},{"text":"\\n","color":"reset"},{"text":"\\u4fee\\u7e55\\u672c ","bold":true,"color":"dark_purple"},{"text":"10000pt","color":"dark_green","underlined":true,"clickEvent":{"action":"run_command","value":"/trigger trade_trigger set 4"},"hoverEvent":{"action":"show_text","contents":"\\u4ea4\\u63db"}},{"text":"\\n","color":"reset"},{"text":"\\u30d3\\u30fc\\u30b3\\u30f3","bold":true,"color":"dark_aqua"},{"text":" ","color":"reset"},{"text":"50000pt","underlined":true,"color":"dark_green","clickEvent":{"action":"run_command","value":"/trigger trade_trigger set 5"},"hoverEvent":{"action":"show_text","contents":"\\u4ea4\\u63db"}},{"text":"\\n","color":"reset"},{"text":"\\u63a1\\u6398\\u901f\\u5ea6\\u4e0a\\u6607","bold":true,"color":"gold"},{"text":"2(30:00)","color":"gold"},{"text":" ","color":"reset"},{"text":"2000pt","underlined":true,"color":"dark_green","clickEvent":{"action":"run_command","value":"/trigger trade_trigger set 6"},"hoverEvent":{"action":"show_text","contents":"\\u4ea4\\u63db"}},{"text":"\\n\\n","color":"reset"},{"text":"\\u73fe\\u5728\\u306e\\u30dd\\u30a4\\u30f3\\u30c8\\u3092\\u78ba\\u8a8d\\u3059\\u308b","bold":true,"underlined":true,"color":"dark_green","clickEvent":{"action":"run_command","value":"/trigger trade_trigger set 99"}}]'],title:"取引本",author:"",display:{Lore:['{"text":"取引する時に使うべし","color":"gold","italic":false}']}}}}
execute as @e[type=item,tag=book,nbt={Item:{id:"minecraft:diamond"}}] at @s if block ~ ~-0.5 ~ minecraft:smithing_table run summon item ~ ~-0.5 ~ {Item:{id:"minecraft:written_book",Count:1b,tag:{CustomModelData:1,pages:['["",{"text":"more mining datapack","bold":true,"color":"gold"},{"text":"\\n","color":"reset"},{"text":"\\u3053\\u306e\\u30c7\\u30fc\\u30bf\\u30d1\\u30c3\\u30af\\u306f\\u3082\\u3063\\u3068\\u63a1\\u6398\\u3092\\u697d\\u3057\\u3093\\u3067\\u307b\\u3057\\u3044\\uff01\\u4fbf\\u5229\\u306b\\u3057\\u305f\\u3044\\uff01\\u3068\\u3044\\u3046\\u30b3\\u30f3\\u30bb\\u30d7\\u30c8\\u3067\\u88fd\\u4f5c\\u3057\\u305f\\u30c7\\u30fc\\u30bf\\u30d1\\u30c3\\u30af\\u3067\\u3059\\u3002","color":"dark_green"},{"text":"\\n\\n\\u73fe\\u5728\\u306f\\u77f3\\u3001\\u5b89\\u5c71\\u5ca9\\u3001\\u82b1\\u5d17\\u5ca9\\u3001\\u9583\\u7dd1\\u5ca9\\u3001\\u30d6\\u30e9\\u30c3\\u30af\\u30b9\\u30c8\\u30fc\\u30f3\\u3001\\u30cd\\u30b6\\u30fc\\u30e9\\u30c3\\u30af\\u3092\\u6398\\u308b\\u3068\\u63a1\\u6398\\u30dd\\u30a4\\u30f3\\u30c8\\u3068\\u3044\\u3046\\u3082\\u306e\\u304c\\u6e9c\\u307e\\u3063\\u3066\\u3044\\u304d\\u307e\\u3059\\u3002\\n ","color":"reset"}]','{"text":"\\u3053\\u306e\\u30dd\\u30a4\\u30f3\\u30c8\\u3092\\u4f7f\\u3063\\u3066\\u3044\\u308d\\u3093\\u306a\\u30a2\\u30a4\\u30c6\\u30e0\\u3068\\u53d6\\u5f15\\u3059\\u308b\\u3053\\u3068\\u304c\\u53ef\\u80fd\\u3067\\u3059\\u3002\\n\\u307e\\u305f\\u3001\\u30c9\\u30ed\\u30c3\\u30d1\\u30fc\\u306e\\u4e0a\\u306b\\u984d\\u7e01\\u3001\\u305d\\u306e\\u984d\\u7e01\\u306e\\u4e2d\\u306b\\u30c0\\u30a4\\u30e4\\u30e2\\u30f3\\u30c9\\u306e\\u30d4\\u30c3\\u30b1\\u30eb\\u3092\\u5165\\u308c\\u308b\\u3053\\u3068\\u306b\\u3088\\u3063\\u3066\\u6539\\u826f\\u4f5c\\u696d\\u53f0\\u3092\\u4f5c\\u6210\\u3059\\u308b\\u3053\\u3068\\u304c\\u53ef\\u80fd\\u3067\\u3059\\u3002\\n\\u73fe\\u5728\\u4f5c\\u308c\\u308b\\u30ec\\u30b7\\u30d4\\u306f3\\u7a2e\\u985e\\u3042\\u308a\\u307e\\u3059\\u3002\\n\\u3053\\u306e\\u30ec\\u30b7\\u30d4\\u306f\\u753b\\u50cf\\u4ed8\\u304d\\u3067\\u516c\\u5f0f\\u30b5\\u30a4\\u30c8\\u306b\\u8f09\\u3063\\u3066\\u3044\\u308b\\u306e\\u3067\\u305d\\u3061\\u3089\\u3092\\u898b\\u3066\\u304f\\u3060\\u3055\\u3044\\u306d\\u3002"}'],title:"説明書",author:""}}}
execute as @e[type=item,tag=book,nbt={Item:{id:"minecraft:diamond"}}] at @s if block ~ ~-0.5 ~ minecraft:smithing_table run kill @e[type=item,tag=book,nbt={Item:{id:"minecraft:diamond"}}]
#毎秒実行tickのbook_give_searchの判定が来たら実行するコマンド群。
#tag=!でまだタグを付与されていないかどうかを見分ける。こうしないと永遠に本giveされちゃうので投げられたってわかった瞬間にタグを付与しよう。
#タグが付与されたら次は本=ガイドブックの召喚だ。これはsummonコマンドでやっている。giveでもいいんだけど演出的にこっちの方がええだろ？
#最後の場所はdiamondをなくす。投げてガイドが出てくるのにダイヤが帰ってきたら変だろ？

